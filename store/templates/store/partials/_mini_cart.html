{% load static %}
<div id="mini-cart-content">
  <div class="mini-cart p-2 border bg-white shadow-sm rounded">
    <h6 class="mb-3">Cart ({{ items|length }} items)</h6>
    
    {% if items %}
      <div class="d-flex flex-column gap-2">
        {% for item in items %}
        <div class="d-flex align-items-center justify-content-between border p-2 rounded shadow-sm">
          <div class="d-flex align-items-center gap-2">
            {% if item.medicine.image %}
              <img src="{{ item.medicine.image.url }}" width="48" height="48" class="rounded" style="object-fit:cover;">
            {% else %}
              <img src="{% static 'images/sample_medicine.jpg' %}" width="48" height="48" class="rounded" style="object-fit:cover;">
            {% endif %}
            <div class="fw-semibold">{{ item.medicine.name }}</div>
          </div>
          <div class="d-flex align-items-center gap-2">
            <span>{{ item.quantity }} Ã— ${{ item.medicine.price }}</span>
            <form method="post" action="{% url 'update_cart' %}" class="d-flex gap-1 align-items-center m-0">
              {% csrf_token %}
              <input type="hidden" name="item_id" value="{{ item.id }}">
              <button class="btn btn-sm btn-outline-success" name="action" value="increase"><i class="fa-solid fa-plus"></i></button>
              <button class="btn btn-sm btn-outline-warning" name="action" value="decrease"><i class="fa-solid fa-minus"></i></button>
              <button class="btn btn-sm btn-outline-danger" name="action" value="remove"><i class="fa-solid fa-trash"></i></button>
            </form>
          </div>
        </div>
        {% endfor %}
      </div>

      <div class="mt-3 d-flex justify-content-between align-items-center">
        <strong>Total:</strong> ${{ total }}
        <a href="{% url 'cart' %}" class="btn btn-primary btn-sm">Go to Cart</a>
      </div>
    {% else %}
      <p class="text-center m-0">Your cart is empty</p>
    {% endif %}
  </div>
</div>
